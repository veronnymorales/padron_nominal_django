<form method="GET" enctype="multipart/form-data">
    <!-- Grupo Izquierdo - Filtros Básicos -->
    <div class="row align-items-end">
        <!-- Año -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="text-primary">AÑO:</label>
                <select class="form-control form-control-sm select2" id="anio" name="anio" style="width: 100%;">
                    <option value="2024">2024</option>
                    <option value="2025" selected>2025</option>
                    <option value="2026">2026</option>
                </select>
            </div>
        </div>

        <!-- Mes inicio -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="text-primary">MES INICIO:</label>
                <select class="form-control form-control-sm select2" id="mes_inicio" name="mes_inicio" style="width: 100%;">
                    <option value = '1'>ENERO</option>
                    <option value = '2'>FEBRERO</option>
                    <option value = '3'>MARZO</option>
                    <option value = '4'>ABRIL</option>
                    <option value = '5'>MAYO</option>
                    <option value = '6'>JUNIO</option>
                    <option value = '7'>JULIO</option>
                    <option value = '8'>AGOSTO</option>
                    <option value = '9' selected="true">SETIEMBRE</option>
                    <option value = '10'>OCTUBRE</option>
                    <option value = '11'>NOVIEMBRE</option>
                    <option value = '12'>DICIEMBRE</option>
                </select>
            </div>
        </div>

        <!-- Mes final -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="text-primary">MES FINAL:</label>
                <select class="form-control form-control-sm select2" id="mes_fin" name="mes_fin" style="width: 100%;">
                    <option value = '1'>ENERO</option>
                    <option value = '2'>FEBRERO</option>
                    <option value = '3'>MARZO</option>
                    <option value = '4'>ABRIL</option>
                    <option value = '5'>MAYO</option>
                    <option value = '6'>JUNIO</option>
                    <option value = '7'>JULIO</option>
                    <option value = '8'>AGOSTO</option>
                    <option value = '9' selected="true">SETIEMBRE</option>
                    <option value = '10'>OCTUBRE</option>
                    <option value = '11'>NOVIEMBRE</option>
                    <option value = '12'>DICIEMBRE</option>
                </select>
            </div>
        </div>

        <!-- provincia-->    
        <div class="col-md-2">
            <div class="form-group">
                <label class="text-primary" for="provincia">PROVINCIA :</label>
                <select class="form-control form-control-sm" name="provincia_h"
                        hx-get="{% url 'p_distritos_compromiso_consentimiento_h' %}"
                        hx-trigger="change"
                        hx-target="#distritos_container">
                    <option value="">--- SELECCIONAR ---</option>
                    {% for p in provincias_h %}
                    <option value="{{ p.ubigueo_filtrado }}">{{ p.Provincia }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
            
        <div class="col-md-2">
            <div class="form-group">
                <div id="distritos_container">
                    {% include 'compromiso_consentimiento/partials/p_distritos.html' %}
                </div>
            </div>
        </div>
        <!--- FIN INCLUDE DROP INCLUYENTE --->
        <!-- boton -->
        <div class="col-md-2">
            <div class="form-group"> 
                <button type="submit" class="btn btn-primary btn-sm">
                    <i class="fas fa-filter"></i> Filtrar
                </button>
                <button type="reset" class="btn btn-default btn-sm">Limpiar</button>
            </div>
        </div>
    </div>
</form>      

<script src="https://code.jquery.com/jquery-3.6.0.min.js "></script>
<script>
    $(document).ready(function() {
        // Inicializar todos los select2
        $('.select2').select2({
            theme: 'bootstrap4',
            width: '100%',
            height: '31px'
        });
        
        // Aplicar la misma altura a todos los selects (incluso los dinámicos)
        function ajustarAlturaSelects() {
            $('.select2-container--bootstrap4 .select2-selection').css('height', '31px');
            $('.select2-container--bootstrap4 .select2-selection--single').css('height', '31px');
            $('.select2-container--bootstrap4 .select2-selection__rendered').css('line-height', '31px');
        }
        
        // Ajustar al inicio
        ajustarAlturaSelects();
        
        // Ajustar después de cada evento htmx
        document.body.addEventListener('htmx:afterSwap', function() {
            setTimeout(function() {
                $('.select2').select2({
                    theme: 'bootstrap4',
                    width: '100%',
                    dropdownAutoWidth: true
                });
                ajustarAlturaSelects();
            }, 100);
        });
    });
</script>